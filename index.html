<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Controlador de Dosificaci√≥n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 100%);
            color: #1e293b;
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        header {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
            padding: 1.2rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 1.8rem;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 0.8rem;
            border-radius: 4px;
        }
        
        .nav-links a:hover {
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        section {
            margin: 3rem 0;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        h2 {
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            color: #1e3a8a;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            font-size: 1.5rem;
            margin: 1.2rem 0;
            color: #334155;
        }
        
        p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .warning-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 5px solid #d97706;
        }
        
        .info-card {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 5px solid #2563eb;
        }
        
        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .simulator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        @media (max-width: 900px) {
            .simulator-container {
                grid-template-columns: 1fr;
            }
        }
        
        .controller {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            padding: 1.5rem;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .lcd-screen {
            background: linear-gradient(135deg, #a8d5e5 0%, #88c1d0 100%);
            color: #002b49;
            font-family: 'Courier New', Courier, monospace;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 2px rgba(168, 213, 229, 0.7);
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .lcd-line {
            display: flex;
            justify-content: space-between;
            font-size: 1.4rem;
            font-weight: bold;
        }
        
        .keypad {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.6rem;
        }
        
        .key {
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
            border: none;
            border-radius: 8px;
            padding: 0.8rem;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        
        .key:active {
            transform: translateY(2px);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .function-key {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            font-size: 0.9rem;
        }
        
        .start-key {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .stop-key {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .reset-key {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }
        
        .emergency-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 1rem;
        }
        
        .emergency-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
            border: 4px solid #7f1d1d;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .instructions {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .step {
            margin-bottom: 1.2rem;
            padding: 1rem;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .active-step {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 4px solid #2563eb;
        }
        
        .progress-container {
            margin-top: 1.5rem;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .progress-bar {
            height: 30px;
            background: #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 15px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        
        th {
            background: #f1f5f9;
            font-weight: 600;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
            color: #64748b;
        }
        
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            section {
                padding: 1.5rem;
            }
            
            h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">Simulador de Dosificaci√≥n</div>
                <ul class="nav-links">
                    <li><a href="#introduccion">Introducci√≥n</a></li>
                    <li><a href="#seguridad">Seguridad</a></li>
                    <li><a href="#interfaz">Interfaz</a></li>
                    <li><a href="#simulador">Simulador</a></li>
                    <li><a href="#alarmas">Alarmas</a></li>
                    <li><a href="#guia">Gu√≠a R√°pida</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <section id="introduccion">
            <h2>Manual de Operaci√≥n Interactivo</h2>
            <p>Este manual interactivo proporciona a los operadores las instrucciones para operar de forma segura y eficiente el controlador de dosificaci√≥n industrial. El objetivo es estandarizar los procedimientos de operaci√≥n, configuraci√≥n b√°sica y respuesta a alarmas a trav√©s de una experiencia pr√°ctica.</p>
            <p>Este controlador industrial est√° dise√±ado para automatizar y supervisar procesos de dosificaci√≥n, llenado y carga de l√≠quidos. Permite preseleccionar una cantidad de producto y controla una v√°lvula y una bomba para dosificar esa cantidad exacta, garantizando precisi√≥n y seguridad.</p>
        </section>

        <section id="seguridad">
            <h2>La Seguridad es lo Primero</h2>
            <div class="card-grid">
                <div class="card warning-card">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <h3>¬°ADVERTENCIA!</h3>
                    <p>La operaci√≥n incorrecta del equipo puede resultar en da√±os materiales o lesiones. Siga siempre los procedimientos de seguridad.</p>
                </div>
                
                <div class="card info-card">
                    <div class="card-icon">üë§</div>
                    <h3>Solo Personal Autorizado</h3>
                    <p>√önicamente el personal capacitado y autorizado por el supervisor puede operar este equipo.</p>
                </div>
                
                <div class="card info-card">
                    <div class="card-icon">üõë</div>
                    <h3>Interruptor de Emergencia (OFF)</h3>
                    <p>El interruptor rojo es el paro de emergencia. Al presionarlo, el proceso se detiene inmediatamente.</p>
                </div>
                
                <div class="card info-card">
                    <div class="card-icon">üß™</div>
                    <h3>Conozca su Proceso</h3>
                    <p>Aseg√∫rese de conocer el producto, los riesgos asociados y el procedimiento de emergencia de la planta.</p>
                </div>
            </div>
        </section>

        <section id="interfaz">
            <h2>Conociendo la Interfaz del Operador</h2>
            <p>Familiar√≠cese con el panel frontal del controlador. <strong>Pase el cursor sobre cada bot√≥n</strong> para ver una descripci√≥n de su funci√≥n.</p>
            
            <div class="controller">
                <div class="lcd-screen">
                    <div class="lcd-line">
                        <span>Pres</span>
                        <span>20000 kg</span>
                    </div>
                    <div class="lcd-line">
                        <span>B</span>
                        <span>2557 kg</span>
                    </div>
                </div>
                
                <div class="keypad">
                    <button class="key" title="Ingresa el n√∫mero 1">1</button>
                    <button class="key" title="Ingresa el n√∫mero 2">2</button>
                    <button class="key" title="Ingresa el n√∫mero 3">3</button>
                    <button class="key function-key" title="Confirma la cantidad preseleccionada">Set</button>
                    <button class="key start-key" title="Inicia o reanuda la dosificaci√≥n">Start</button>
                    
                    <button class="key" title="Ingresa el n√∫mero 4">4</button>
                    <button class="key" title="Ingresa el n√∫mero 5">5</button>
                    <button class="key" title="Ingresa el n√∫mero 6">6</button>
                    <button class="key function-key" title="Tecla de funci√≥n programable 1">F1</button>
                    <button class="key stop-key" title="Pausa la dosificaci√≥n">Stop</button>
                    
                    <button class="key" title="Ingresa el n√∫mero 7">7</button>
                    <button class="key" title="Ingresa el n√∫mero 8">8</button>
                    <button class="key" title="Ingresa el n√∫mero 9">9</button>
                    <button class="key function-key" title="Tecla de funci√≥n programable 2">F2</button>
                    <button class="key function-key" title="Tecla de funci√≥n programable 3">F3</button>
                    
                    <button class="key reset-key" title="Reinicia para un nuevo lote o borra una alarma">RESET</button>
                    <button class="key" title="Ingresa el n√∫mero 0">0</button>
                    <button class="key" title="Muestra el caudal actual">#</button>
                    <button class="key function-key" title="Accede a los men√∫s de configuraci√≥n">Menu</button>
                    <button class="key function-key" title="Control Remoto">RC</button>
                </div>
                
                <div class="emergency-section">
                    <div class="emergency-button" title="Interruptor de paro de emergencia">OFF</div>
                    <span>Interruptor de Emergencia</span>
                </div>
            </div>
        </section>

        <section id="simulador">
            <h2>Simulador de Operaci√≥n Est√°ndar</h2>
            <div class="simulator-container">
                <div class="instructions">
                    <h3>Siga las instrucciones para completar una dosificaci√≥n:</h3>
                    <div class="step active-step">
                        <p><strong>Paso 1: Preparaci√≥n para un Nuevo Lote.</strong></p>
                        <p>Presione la tecla <strong>[RESET]</strong> para borrar los datos del lote anterior.</p>
                    </div>
                    <div class="step">
                        <p><strong>Paso 2: Ingresar la Cantidad.</strong></p>
                        <p>Use el teclado num√©rico para ingresar <strong>1500</strong> kg.</p>
                    </div>
                    <div class="step">
                        <p><strong>Paso 3: Confirmar la Preselecci√≥n.</strong></p>
                        <p>Presione la tecla <strong>[Set]</strong> para confirmar.</p>
                    </div>
                    <div class="step">
                        <p><strong>Paso 4: Iniciar la Dosificaci√≥n.</strong></p>
                        <p>Presione la tecla <strong>[Start]</strong> para comenzar.</p>
                    </div>
                    <div class="step">
                        <p><strong>Paso 5: Proceso en curso.</strong></p>
                        <p>La dosificaci√≥n se completar√° autom√°ticamente. Puede pausar con <strong>[Stop]</strong>.</p>
                    </div>
                </div>
                
                <div>
                    <h3>Panel de Simulaci√≥n</h3>
                    <div class="controller">
                        <div class="lcd-screen">
                            <div class="lcd-line">
                                <span>Pres</span>
                                <span id="preset-value">20000 kg</span>
                            </div>
                            <div class="lcd-line">
                                <span>B</span>
                                <span id="batch-value">2557 kg</span>
                            </div>
                        </div>
                        
                        <div class="keypad">
                            <button class="key" onclick="pressKey('1')">1</button>
                            <button class="key" onclick="pressKey('2')">2</button>
                            <button class="key" onclick="pressKey('3')">3</button>
                            <button class="key function-key" onclick="pressKey('Set')">Set</button>
                            <button class="key start-key" onclick="pressKey('Start')">Start</button>
                            
                            <button class="key" onclick="pressKey('4')">4</button>
                            <button class="key" onclick="pressKey('5')">5</button>
                            <button class="key" onclick="pressKey('6')">6</button>
                            <button class="key function-key" onclick="pressKey('F1')">F1</button>
                            <button class="key stop-key" onclick="pressKey('Stop')">Stop</button>
                            
                            <button class="key" onclick="pressKey('7')">7</button>
                            <button class="key" onclick="pressKey('8')">8</button>
                            <button class="key" onclick="pressKey('9')">9</button>
                            <button class="key function-key" onclick="pressKey('F2')">F2</button>
                            <button class="key function-key" onclick="pressKey('F3')">F3</button>
                            
                            <button class="key reset-key" onclick="pressKey('RESET')">RESET</button>
                            <button class="key" onclick="pressKey('0')">0</button>
                            <button class="key" onclick="pressKey('#')">#</button>
                            <button class="key function-key" onclick="pressKey('Menu')">Menu</button>
                            <button class="key function-key" onclick="pressKey('RC')">RC</button>
                        </div>
                        
                        <div class="emergency-section">
                            <div class="emergency-button" onclick="emergencyStop()">OFF</div>
                            <span>Interruptor de Emergencia</span>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <h4>Progreso de Dosificaci√≥n</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <p id="progress-text">Preparado para comenzar</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="alarmas">
            <h2>Gu√≠a de Alarmas y Mensajes de Error</h2>
            <table>
                <thead>
                    <tr>
                        <th>Mensaje en Pantalla</th>
                        <th>Significado</th>
                        <th>Acci√≥n Requerida</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ERR OFF active</td>
                        <td>Se presion√≥ el interruptor de paro de emergencia OFF.</td>
                        <td>1. Aseg√∫rese de que la condici√≥n de emergencia est√© resuelta.<br>2. Gire y libere el interruptor OFF.<br>3. Presione [Reset] para borrar la alarma.</td>
                    </tr>
                    <tr>
                        <td>ERR MIN FLOW</td>
                        <td>El caudal es m√°s bajo de lo esperado.</td>
                        <td>1. El proceso se detiene.<br>2. Verifique si hay obstrucciones, si la bomba funciona o si el tanque de suministro est√° vac√≠o.<br>3. Solucione la causa y presione [Reset].</td>
                    </tr>
                    <tr>
                        <td>ERR S.-Break NK1</td>
                        <td>Falla en el sensor de flujo (rotura de cable).</td>
                        <td>1. El proceso se detiene.<br>2. Notifique inmediatamente a Mantenimiento.<br>3. No intente continuar hasta que sea reparado.</td>
                    </tr>
                    <tr>
                        <td>ERR.NO GROUNDING</td>
                        <td>La conexi√≥n a tierra no est√° detectada.</td>
                        <td>1. Verifique que la pinza de puesta a tierra est√© conectada correctamente.<br>2. Una vez corregido, presione [Reset].</td>
                    </tr>
                    <tr>
                        <td>Pres. too less / great</td>
                        <td>La cantidad preseleccionada est√° fuera de los l√≠mites.</td>
                        <td>1. Presione [Reset].<br>2. Ingrese una cantidad v√°lida dentro del rango permitido.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="guia">
            <h2>Gu√≠a R√°pida de Operaci√≥n</h2>
            <table>
                <thead>
                    <tr>
                        <th>Para...</th>
                        <th>Presione la(s) Tecla(s)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Iniciar un nuevo lote</strong></td>
                        <td>[Reset] ‚Üí [Ingresar Cantidad] ‚Üí [Set] ‚Üí [Start]</td>
                    </tr>
                    <tr>
                        <td><strong>Pausar la dosificaci√≥n</strong></td>
                        <td>[Stop]</td>
                    </tr>
                    <tr>
                        <td><strong>Reanudar la dosificaci√≥n</strong></td>
                        <td>[Start]</td>
                    </tr>
                    <tr>
                        <td><strong>Cancelar un lote pausado</strong></td>
                        <td>[Reset]</td>
                    </tr>
                    <tr>
                        <td><strong>Ver el caudal actual</strong></td>
                        <td>[#]</td>
                    </tr>
                    <tr>
                        <td><strong>Paro de Emergencia</strong></td>
                        <td>Presionar el interruptor rojo OFF</td>
                    </tr>
                    <tr>
                        <td><strong>Borrar una alarma</strong></td>
                        <td>Solucionar la causa y presionar [Reset]</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>Simulador de Capacitaci√≥n para Controladores de Dosificaci√≥n | Creado con fines educativos</p>
        </div>
    </footer>

    <script>
        // Estado del simulador
        const simulatorState = {
            currentStep: 1,
            presetValue: '20000',
            batchedValue: '2557',
            isBatching: false,
            targetPreset: '1500',
            batchInterval: null
        };

        // Elementos de la interfaz
        const presetElement = document.getElementById('preset-value');
        const batchElement = document.getElementById('batch-value');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const steps = document.querySelectorAll('.step');

        // Funci√≥n para presionar una tecla
        function pressKey(key) {
            if (key === 'RESET') {
                resetSimulator();
                updateStep(1);
            } else if (key === 'Set' && simulatorState.currentStep === 2) {
                if (simulatorState.presetValue === simulatorState.targetPreset) {
                    updateStep(3);
                }
            } else if (key === 'Start' && simulatorState.currentStep === 3) {
                startBatching();
                updateStep(4);
            } else if (key === 'Stop' && simulatorState.isBatching) {
                stopBatching();
            } else if (!isNaN(key) && simulatorState.currentStep === 1) {
                // Solo aceptar entrada num√©rica en el paso 2
                if (simulatorState.presetValue === '20000') {
                    simulatorState.presetValue = '';
                }
                simulatorState.presetValue += key;
                if (simulatorState.presetValue.length > 4) {
                    simulatorState.presetValue = simulatorState.presetValue.slice(0, 4);
                }
                presetElement.textContent = simulatorState.presetValue + ' kg';
                
                // Si el usuario ingresa el valor objetivo, avanzar autom√°ticamente
                if (simulatorState.presetValue === simulatorState.targetPreset) {
                    updateStep(2);
                }
            }
            
            updateDisplay();
        }

        // Funci√≥n de paro de emergencia
        function emergencyStop() {
            if (simulatorState.isBatching) {
                stopBatching();
                progressText.textContent = 'PARO DE EMERGENCIA ACTIVADO';
                progressText.style.color = '#dc2626';
            }
        }

        // Funci√≥n para iniciar el proceso de dosificaci√≥n
        function startBatching() {
            simulatorState.isBatching = true;
            let progress = 0;
            const target = parseInt(simulatorState.targetPreset);
            
            simulatorState.batchInterval = setInterval(() => {
                progress += 2;
                if (progress > 100) progress = 100;
                
                progressFill.style.width = progress + '%';
                const currentValue = Math.round(target * progress / 100);
                simulatorState.batchedValue = currentValue.toString();
                batchElement.textContent = simulatorState.batchedValue + ' kg';
                
                if (progress < 50) {
                    progressText.textContent = 'Dosificaci√≥n en progreso...';
                } else if (progress < 100) {
                    progressText.textContent = 'Dosificaci√≥n a mitad de camino';
                } else {
                    progressText.textContent = '¬°Dosificaci√≥n completada!';
                    clearInterval(simulatorState.batchInterval);
                    simulatorState.isBatching = false;
                    updateStep(5);
                }
                
                updateDisplay();
            }, 100);
        }

        // Funci√≥n para detener la dosificaci√≥n
        function stopBatching() {
            if (simulatorState.batchInterval) {
                clearInterval(simulatorState.batchInterval);
                simulatorState.isBatching = false;
                progressText.textContent = 'Dosificaci√≥n pausada. Presione Start para continuar.';
            }
        }

        // Funci√≥n para reiniciar el simulador
        function resetSimulator() {
            if (simulatorState.batchInterval) {
                clearInterval(simulatorState.batchInterval);
            }
            
            simulatorState.currentStep = 1;
            simulatorState.presetValue = '20000';
            simulatorState.batchedValue = '2557';
            simulatorState.isBatching = false;
            
            progressFill.style.width = '0%';
            progressText.textContent = 'Preparado para comenzar';
            progressText.style.color = '';
            
            updateDisplay();
            updateStep(1);
        }

        // Funci√≥n para actualizar la visualizaci√≥n
        function updateDisplay() {
            presetElement.textContent = simulatorState.presetValue + ' kg';
            batchElement.textContent = simulatorState.batchedValue + ' kg';
        }

        // Funci√≥n para actualizar el paso actual
        function updateStep(stepNumber) {
            simulatorState.currentStep = stepNumber;
            
            // Actualizar la visualizaci√≥n de los pasos
            steps.forEach((step, index) => {
                if (index === stepNumber - 1) {
                    step.classList.add('active-step');
                } else {
                    step.classList.remove('active-step');
                }
            });
        }

        // Inicializar el simulador
        updateDisplay();
    </script>
</body>
</html>